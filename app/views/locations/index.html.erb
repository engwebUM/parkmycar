<div class="row">
  <div class="col-md-offset-1 col-md-10">
    <div class="page-header">
      <h3>Listing Locations</h3>
    </div>
    <div class="row">
      <div class="col-md-12">
      <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
      <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
      <div class="form alert" role="alert">
      <%= form_tag locations_path, :class => 'form-inline', :method => :get do %>
        <div class="form-group">
          <%= label_tag :location, 'Search spaces near' ,class: 'sr-only' %>
          <%= text_field_tag :location, params[:location], placeholder: 'Search spaces near', class: 'form-control' %>
        </div>
        <div class="form-group">
          <%= label_tag :distance, "Distance", class: 'sr-only'  %>
          <%= text_field_tag :distance, params[:distance], placeholder: 'Distance', class: 'form-control'  %>
        </div>
        <div class="form-group">
          <%= submit_tag "Search Near", class: 'btn btn-success' %>
        </div>
      <% end %>
      </div>
      </div>
    </div>
    <hr>
    <div class="row">

      <div class="col-md-6">
        <table class="table table-hover">
          <thead>
            <tr>
              <th></th>
              <th>Title</th>
              <th>Starting at</th>
              <th>Address</th>
            </tr>
          </thead>
          <tbody>
            <%= render @spaces %>
          </tbody>
        </table>
        <%= will_paginate @spaces, renderer: BootstrapPagination::Rails %>
      </div>

      <div class="col-md-6">
        <div style='width: 450px;'>
          <div id="map" style='width: 450px; height: 400px;'></div>
        </div>
        <script type="text/javascript">
          handler = Gmaps.build('Google');
          handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
            markers = handler.addMarkers(<%=raw @hash.to_json %>);
            handler.bounds.extendWith(markers);
            handler.fitMapToBounds();
          });
        </script>
      </div>
    </div>
    <hr>

  </div>
</div>
