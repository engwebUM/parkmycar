<%= render 'layouts/jumbotron' %>
<div class="container">
  <div class="row">
    <div class="col-md-offset-1 col-md-10">
      <%= render 'layouts/sidenav' %>
      <div class="col-sm-9 col-md-9">
        <div class="panel panel-info">
          <div class="panel-heading">
            <h3 class="panel-title">Edit My Profile</h3>
          </div>
          <div class="panel-body">
            <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
            <%= devise_error_messages! %>
            <div class="panel panel-primary">
              <div class="panel-heading">
                <h3 class="panel-title">Profile Information</h3>
              </div>
              <div class="panel-body">
                <% if current_user.avatar.url.present? %>
                  <%= image_tag(current_user.photo, class: 'img-circle') %>
                  <%= f.check_box :remove_avatar  %> Remove avatar
                <% end %>
                <div class="form-group">
                  <%= f.file_field :avatar, class: 'form-control' %>
                  <%= f.hidden_field :avatar_cache %>
                </div>
                <div class="form-group">
                  <%= f.label :email %>
                  <%= f.email_field :email, autofocus: true, class: 'form-control', placeholder: 'Email' %>
                </div>
                <div class="form-group">
                  <%= f.label :username %>
                  <%= f.text_field :username, class: 'form-control', placeholder: 'Username' %>
                </div>
              </div>
            </div>
            <div class="panel panel-primary">
              <div class="panel-heading">
                <h3 class="panel-title">Personal Information</h3>
              </div>
              <div class="panel-body">
                <div class="form-group row">
                  <div class="col-md-6">
                    <%= f.label :first_name %>
                    <%= f.text_field :first_name, class: 'form-control', placeholder: 'First Name' %>
                  </div>
                  <div class="col-md-6">
                    <%= f.label :last_name %>
                    <%= f.text_field :last_name, class: 'form-control', placeholder: 'Last Name' %>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-md-6">
                    <%= f.label :phone_number %>
                    <%= f.number_field :phone_number, class: 'form-control', placeholder: 'Phone Number' %>
                  </div>
                  <div class="col-md-6">
                    <div class="input-group date" id="birthdate">
                        <%= f.label :date_of_birth %>
                        <div class="input-group">
                          <%= f.text_field :date_of_birth, class: 'form-control' %>
                          <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <script type="text/javascript">
              $(document).ready(function() {
                 $("#birthdate").datetimepicker({
                    format: 'YYYY-MM-DD'
                  });
              });
            </script>
            <div class="panel panel-primary">
              <div class="panel-heading">
                <h3 class="panel-title">Change Password</h3>
              </div>
              <div class="panel-body">
                <div class="form-group">
                <i>(leave blank if you don't want to change it)</i><br />
                  <%= f.label :password %>
                  <%= f.password_field :password, autocomplete: "off", class: 'form-control', placeholder: 'Password' %>
                </div>
                <div class="form-group">
                  <%= f.label :password_confirmation %>
                  <%= f.password_field :password_confirmation, autocomplete: "off", class: 'form-control', placeholder: 'Confirmation password' %>
                </div>
              </div>
            </div>
            <div class="panel panel-info">
              <div class="panel-heading">
                <h3 class="panel-title">Current Password</h3>
              </div>
              <div class="panel-body">
                <div class="form-group">
                  <i>(we need your current password to confirm your changes)</i><br />
                  <%= f.label :current_password %>
                  <%= f.password_field :current_password, autocomplete: "off", class: 'form-control', placeholder: 'Current password' %>
                </div>
              </div>
            </div>
            <div class="actions text-right">
              <%= f.submit "Save", class: 'btn btn-success' %>
            </div>
          <% end %>
          <div class="page-header">
            <h2>Cancel my account</h2>
          </div>
          <p>
            Unhappy?
            <%= link_to registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete,  class: 'btn btn-danger btn-xs' do %>
            <span class="glyphicon glyphicon-remove-circle"></span> Delete my Account
           <% end %>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
